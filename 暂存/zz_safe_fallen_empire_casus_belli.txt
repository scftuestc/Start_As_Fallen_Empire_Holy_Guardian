#my_casus_belli = {
#	potential = { ... }		# trigger to make some CBs invalid for certain types of countries; this = attacker (CB owner); default: { always = yes }
#	is_valid = { ... }		# trigger, evaluated daily to check if CB should be created or destroyed automatically, does not affect CBs granted via script;
#								# this = attacker (CB owner), from = defender (target country); default: { always = yes }
#	destroy_if = { ... }	# trigger, evaluated daily to destroy CBs that have been granted via script ahead of expiration date;
#								# this = attacker (CB owner), from = defender (target country); default: { always = no }
#}

## 觉醒帝国可以制造宣称来对外扩张
cb_ae_claim = {
    show_in_diplomacy = yes
    show_notification = no
    potential = {
        is_country_type = awakened_fallen_empire
        NOT = { is_in_federation_with = from }
    }
    is_valid = {
        OR = {
            has_claim = FROM
            from = {
                any_subject = {
                    root = { has_claim = prev }
                }
            }
        }
        has_total_war_cb = no
        NOT = { is_overlord_to = FROM }
        OR = {
            is_subject = no
            overlord = { NOT = { is_same_value = from } }
        }
    }
}
## 觉醒帝国可以要求臣服获得宣战理由来对外扩张
cb_ae_subjugation = {
    show_in_diplomacy = yes
    show_notification = no
    potential = {
        OR = {
            is_country_type = awakened_fallen_empire
        }
        NOT = { is_in_federation_with = from }
        is_subject = no
    }
    is_valid = {
        NOR = {
            is_overlord_to = FROM
            has_crisis_level = crisis_level_1
        }
        from = { is_subject = no }
        OR = {
            is_country_type = awakened_fallen_empire
            relative_power = {
                who = FROM
                category = all
                value > equivalent
            }
        }
    }
    destroy_if = {
        NOT = { is_country_type = awakened_fallen_empire }
        has_crisis_level = crisis_level_1
        relative_power = {
            who = FROM
            category = all
            value < superior
        }
    }
}
## 觉醒帝国可以通过巨像获得宣战理由来对外扩张
cb_ae_colossus = {
    show_in_diplomacy = yes
    show_notification = no
    potential = {
        has_technology = "tech_colossus"
        has_policy_flag = unrestricted_wars
        is_country_type = awakened_fallen_empire
        NOT = { is_in_federation_with = from }
    }
    is_valid = {
        has_total_war_cb = no
        NOT = { is_overlord_to = FROM }
        OR = {
            is_subject = no
            overlord = { NOT = { is_same_value = from } }
        }
        any_controlled_fleet = {
            is_ship_class = shipclass_military_special
            any_controlled_ship = { is_ship_size = colossus }
        }
    }
}
## 觉醒帝国可以获得阻止巨像宣战理由，无论自身有没有造出巨像
cb_ae_stop_colossus = {
    show_in_diplomacy = yes
    show_notification = yes
    potential = {
        from = { has_technology = "tech_colossus" }
        is_country_type = awakened_fallen_empire
        NOT = { is_in_federation_with = from }
    }
    is_valid = {
        has_total_war_cb = no
        # 目标国家是非堕落帝国
        from = { is_country_type = default }
        NOT = { is_overlord_to = FROM }
        OR = {
            is_subject = no
            overlord = { NOT = { is_same_value = from } }
        }
        # 目标国家要造出巨像
        from = {
            any_controlled_fleet = {
                is_ship_class = shipclass_military_special
                any_controlled_ship = { is_ship_size = colossus }
            }
        }
    }
}
## 附庸国对堕落/觉醒宣誓效忠时，老登也可以获得宣战理由
cb_fe_ae_allegiance = {
    show_in_diplomacy = no
    show_notification = yes
    potential = {
        is_country_type = default
        is_country_type = fallen_empire
        is_country_type = awakened_fallen_empire
    }
    is_valid = {
        has_secret_fealty_from_subject_of = from
        is_subject = no
        NOT = { is_in_federation_with = from }
    }
}
## 失落/觉醒帝国可以对天灾飞升/灭绝/合成女王宣战
cb_fe_ae_crisis_containment = {
    show_in_diplomacy = yes
    show_notification = no
    potential = {
        from = {
            OR = {
                is_country_type = synth_queen
                has_valid_civic = civic_fanatic_purifiers
                has_valid_civic = civic_hive_devouring_swarm
                has_valid_civic = civic_machine_assimilator
                has_valid_civic = civic_machine_terminator
                has_menace_perk = menp_behemoth_ever_hungry
            }
        }
        is_country_type = fallen_empire
        is_country_type = awakened_fallen_empire
        NOR = {
            has_valid_civic = civic_fanatic_purifiers
            has_valid_civic = civic_machine_terminator
            has_valid_civic = civic_machine_assimilator
            has_valid_civic = civic_hive_devouring_swarm
        }
    }
    is_valid = {
        has_total_war_cb = yes
        OR = {
            is_subject = no
            overlord = { NOT = { is_same_value = from } }
        }
        NOT = { is_overlord_to = FROM }
        from = {
            OR = {
                is_country_type = awakened_fallen_empire
                is_country_type = synth_queen
                has_valid_civic = civic_fanatic_purifiers
                has_valid_civic = civic_hive_devouring_swarm
                has_valid_civic = civic_machine_assimilator
                has_valid_civic = civic_machine_terminator
                has_menace_perk = menp_behemoth_ever_hungry
            }
        }
    }
}