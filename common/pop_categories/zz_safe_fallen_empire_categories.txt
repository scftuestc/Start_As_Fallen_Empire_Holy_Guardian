# 精英先驱者-继承自普通帝国的精英阶层
precursor_archon = {
    rank = 4
    change_job_threshold = 2


    weight = {
        weight = 100
        # AI无法使用
        modifier = {
            factor = 0
            exists = owner
            owner = {
                is_ai = yes
            }
        }
        # crisis purge
        modifier = {
            factor = 0.01
            exists = planet
            exists = planet.controller
            planet.controller = {
                OR = {
                    is_country_type = swarm
                    is_country_type = ai_empire
                }
            }
        }
    }

    pop_group_modifier = {
        # 政治影响力和住房使用，舒适度使用比普通先驱者更高
        pop_political_power = 12
        pop_housing_usage_base = 3
        pop_amenities_usage_base = 3
    }

    allow_resettlement = { always = yes }

    resettlement_cost = {
        energy = 300
        consumer_goods = 10
    }

    resettlement_cost = {
        trigger = {
            owner = {
                NOT = { has_valid_civic = civic_corvee_system }
            }
        }
        unity = 50
    }

    # Triggered Modifiers
    inline_script = "pop_categories/social_classes_triggered_modifiers"
    inline_script = "pop_categories/social_classes_triggered_modifiers_no_happiness"

    resources = {
        category = pop_category_precursor_archon

        # Living Standard Trait Output
        inline_script = "pop_categories/living_standard_ruler_production"

        produces = {
            trigger = { has_trait = trait_inner_darkness }
            sr_dark_matter = @inner_darkness_dark_matter_production
        }
        produces = {
            trigger = {
                planet = { has_modifier = pm_gaseous_fauna }
            }
            exotic_gases = @gaseous_fauna_exotic_gases_production
        }

        # Consumer Goods Upkeep
        upkeep = {
            trigger = {
                exists = owner
                owner = {
                    is_spiritualist = yes
                }
            }
            consumer_goods = 1.0
        }
        # Food Upkeep
        upkeep = {
            trigger = {
                has_food_upkeep = yes
                is_phototrophic = no
                exists = owner
                owner = {
                    is_spiritualist = yes
                }
            }
            food = 1.0
        }
        upkeep = {
            trigger = {
                has_food_upkeep = yes
                is_phototrophic = yes
                exists = owner
                owner = {
                    is_spiritualist = yes
                }
            }
            food = 0.5
        }
        # Mineral Upkeep
        upkeep = {
            trigger = {
                has_mineral_upkeep = yes
                is_phototrophic = no
                exists = owner
                owner = {
                    is_spiritualist = yes
                }
            }
            minerals = 1.0
        }
        upkeep = {
            trigger = {
                has_mineral_upkeep = yes
                is_phototrophic = yes
                exists = owner
                owner = {
                    is_spiritualist = yes
                }
            }
            minerals = 0.5
        }
        # Energy Upkeep
        upkeep = {
            trigger = {
                has_phototrophic_energy_upkeep = yes
                exists = owner
                owner = {
                    is_spiritualist = yes
                }
            }
            energy = 0.5
        }
        upkeep = {
            trigger = {
                is_organic_species = yes
                has_energy_upkeep = yes
                exists = owner
                owner = {
                    is_spiritualist = yes
                }
            }
            energy = 1.0
        }
    }
}
# 匠师先驱者-继承自普通帝国的专家阶层
precursor_artisan = {
    rank = 3
    change_job_threshold = 1.25

    weight = {
        weight = 50
        # AI无法使用
        modifier = {
            factor = 0
            exists = owner
            owner = {
                is_ai = yes
            }
        }
        # crisis purge
        modifier = {
            factor = 0.01
            exists = planet
            exists = planet.controller
            planet.controller = {
                OR = {
                    is_country_type = swarm
                    is_country_type = ai_empire
                }
            }
        }
    }

    pop_group_modifier = {
        pop_political_power = 2
        pop_housing_usage_base = 2
        pop_amenities_usage_base = 2
    }

    # scope: pop to be resettled
    allow_resettlement = { always = yes }

    resettlement_cost = {
        energy = 150
        consumer_goods = 5
    }

    resettlement_cost = {
        trigger = {
            owner = {
                NOT = { has_valid_civic = civic_corvee_system }
            }
        }
        unity = 25
    }

    # Triggered Modifiers
    inline_script = "pop_categories/social_classes_triggered_modifiers"
    inline_script = "pop_categories/social_classes_triggered_modifiers_no_happiness"

    resources = {
        category = pop_category_precursor_artisan
        # Living Standard Trait Output
        inline_script = "pop_categories/living_standard_specialist_production"

        produces = {
            trigger = {
                has_trait = trait_inner_darkness
            }
            sr_dark_matter = @inner_darkness_dark_matter_production
        }

        produces = {
            trigger = {
                planet = {
                    has_modifier = pm_gaseous_fauna
                }
            }
            exotic_gases = @gaseous_fauna_exotic_gases_production
        }

        # Consumer Goods Upkeep
        upkeep = {
            trigger = {
                exists = owner
                owner = {
                    is_spiritualist = yes
                }
            }
            consumer_goods = 1.0
        }
        # Food Upkeep
        upkeep = {
            trigger = {
                has_food_upkeep = yes
                is_phototrophic = no
                exists = owner
                owner = {
                    is_spiritualist = yes
                }
            }
            food = 1.0
        }
        upkeep = {
            trigger = {
                has_food_upkeep = yes
                is_phototrophic = yes
                exists = owner
                owner = {
                    is_spiritualist = yes
                }
            }
            food = 0.5
        }
        # Mineral Upkeep
        upkeep = {
            trigger = {
                has_mineral_upkeep = yes
                is_phototrophic = no
                exists = owner
                owner = {
                    is_spiritualist = yes
                }
            }
            minerals = 1.0
        }
        upkeep = {
            trigger = {
                has_mineral_upkeep = yes
                is_phototrophic = yes
                exists = owner
                owner = {
                    is_spiritualist = yes
                }
            }
            minerals = 0.5
        }
        # Energy Upkeep
        upkeep = {
            trigger = {
                has_phototrophic_energy_upkeep = yes
                exists = owner
                owner = {
                    is_spiritualist = yes
                }
            }
            energy = 0.5
        }
        upkeep = {
            trigger = {
                is_organic_species = yes
                has_energy_upkeep = yes
                exists = owner
                owner = {
                    is_spiritualist = yes
                }
            }
            energy = 1.0
        }
    }
}
# 守望先驱者-继承自普通帝国的劳工阶层
precursor_warden = {
    rank = 2

    change_job_threshold = 1.15

    triggered_planet_modifier = {
        potential = {
            is_unemployed = no
            planet = { has_modifier = penal_colony }
        }
        planet_crime_add = 3
    }

    weight = {
        weight = 25
        # AI无法使用
        modifier = {
            factor = 0
            exists = owner
            owner = {
                is_ai = yes
            }
        }
        # crisis purge
        modifier = {
            factor = 0.01
            exists = planet
            exists = planet.controller
            planet.controller = {
                OR = {
                    is_country_type = swarm
                    is_country_type = ai_empire
                }
            }
        }
        modifier = {
            factor = 0.01
            is_unemployed = yes
        }
    }

    pop_group_modifier = {
        pop_housing_usage_base = 1
        pop_amenities_usage_base = 1
    }

    # scope: pop to be resettled
    allow_resettlement = { always = yes }

    resettlement_cost = {
        energy = 75
        consumer_goods = 1
    }

    resettlement_cost = {
        trigger = {
            owner = {
                NOT = { has_valid_civic = civic_corvee_system }
            }
        }
        unity = 10
    }

    # Triggered Modifiers
    inline_script = "pop_categories/social_classes_triggered_modifiers"
    inline_script = "pop_categories/social_classes_triggered_modifiers_no_happiness"

    resources = {
        category = pop_category_precursor_warden

        # Living Standard Trait Output
        inline_script = "pop_categories/living_standard_worker_production"

        produces = {
            trigger = {
                has_trait = trait_inner_darkness
            }
            sr_dark_matter = @inner_darkness_dark_matter_production
        }

        produces = {
            trigger = {
                planet = {
                    has_modifier = pm_gaseous_fauna
                }
            }
            exotic_gases = @gaseous_fauna_exotic_gases_production
        }

        produces = {
            trigger = {
                planet = {
                    has_modifier = pm_raining_corpses
                }
            }
            minor_artifacts = @raining_corpses_resource_amount
        }

        produces = {
            trigger = {
                planet = {
                    has_modifier = pm_raining_corpses_no_ancrel
                }
            }
            consumer_goods = @raining_corpses_resource_amount
        }

        # Consumer Goods Upkeep
        upkeep = {
            trigger = {
                exists = owner
                owner = {
                    is_spiritualist = yes
                }
            }
            consumer_goods = 1.0
        }
        # Food Upkeep
        upkeep = {
            trigger = {
                has_food_upkeep = yes
                is_phototrophic = no
                exists = owner
                owner = {
                    is_spiritualist = yes
                }
            }
            food = 1.0
        }
        upkeep = {
            trigger = {
                has_food_upkeep = yes
                is_phototrophic = yes
                exists = owner
                owner = {
                    is_spiritualist = yes
                }
            }
            food = 0.5
        }
        # Mineral Upkeep
        upkeep = {
            trigger = {
                has_mineral_upkeep = yes
                is_phototrophic = no
                exists = owner
                owner = {
                    is_spiritualist = yes
                }
            }
            minerals = 1.0
        }
        upkeep = {
            trigger = {
                has_mineral_upkeep = yes
                is_phototrophic = yes
                exists = owner
                owner = {
                    is_spiritualist = yes
                }
            }
            minerals = 0.5
        }
        # Energy Upkeep
        upkeep = {
            trigger = {
                has_phototrophic_energy_upkeep = yes
                exists = owner
                owner = {
                    is_spiritualist = yes
                }
            }
            energy = 0.5
        }
        upkeep = {
            trigger = {
                is_organic_species = yes
                has_energy_upkeep = yes
                exists = owner
                owner = {
                    is_spiritualist = yes
                }
            }
            energy = 1.0
        }
    }
}