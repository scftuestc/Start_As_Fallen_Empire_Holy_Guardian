# 精英先驱者-继承自普通帝国的精英阶层
precursor_archon = {
    rank = 4
    change_job_threshold = 2.0

    weight = {
        weight = 3
        # NO AI
        modifier = {
            factor = 0
            exists = planet
            exists = planet.controller
            planet.controller = {
                is_country_type = ai_empire
                NOT = { has_origin = Start_As_Fallen_Empire_Holy_Guardians }
            }
        }
        # crisis purge
        modifier = {
            factor = 0.01
            exists = planet
            exists = planet.controller
            planet.controller = {
                OR = {
                    is_country_type = swarm
                    is_country_type = ai_empire
                }
            }
        }
    }

    pop_group_modifier = {
        pop_housing_usage_base = 3
        pop_amenities_usage_base = 3
    }

    allow_resettlement = { always = yes }

    resettlement_cost = {
        energy = 500
        consumer_goods = 50
    }

    resettlement_cost = {
        trigger = {
            owner = {
                NOT = { has_valid_civic = civic_corvee_system }
            }
        }
        unity = 50
    }

    # Triggered Modifiers
    inline_script = "pop_categories/social_classes_triggered_modifiers"
    inline_script = "pop_categories/social_classes_triggered_modifiers_no_happiness"

    resources = {
        category = pop_category_precursor_archon

        # Living Standard Trait Output
        inline_script = "pop_categories/living_standard_ruler_production"

        produces = {
            trigger = { has_trait = trait_inner_darkness }
            sr_dark_matter = @inner_darkness_dark_matter_production
        }
        produces = {
            trigger = {
                planet = { has_modifier = pm_gaseous_fauna }
            }
            exotic_gases = @gaseous_fauna_exotic_gases_production
        }
    }
}

# 匠师先驱者-继承自普通帝国的专家阶层
precursor_artisan = {
    rank = 3
    change_job_threshold = 1.25

    weight = {
        weight = 2
        # NO AI
        modifier = {
            factor = 0
            exists = planet
            exists = planet.controller
            planet.controller = {
                OR = {
                    is_country_type = ai_empire
                    NOT = { has_origin = Start_As_Fallen_Empire_Holy_Guardians }
                }
            }
        }
        # crisis purge
        modifier = {
            factor = 0.01
            exists = planet
            exists = planet.controller
            planet.controller = {
                OR = {
                    is_country_type = swarm
                    is_country_type = ai_empire
                }
            }
        }
    }

    pop_group_modifier = {
        pop_housing_usage_base = 2
        pop_amenities_usage_base = 2
    }

    # scope: pop to be resettled
    allow_resettlement = { always = yes }

    resettlement_cost = {
        energy = 250
        consumer_goods = 25
    }

    resettlement_cost = {
        trigger = {
            owner = {
                NOT = { has_valid_civic = civic_corvee_system }
            }
        }
        unity = 25
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { has_civic = civic_dystopian_society }
        }
        planet_crime_add = 1
    }

    # Triggered Modifiers
    inline_script = "pop_categories/social_classes_triggered_modifiers"
    inline_script = "pop_categories/social_classes_triggered_modifiers_no_happiness"

    resources = {
        category = pop_category_precursor_artisan

        # Living Standard Trait Output
        inline_script = "pop_categories/living_standard_specialist_production"

        produces = {
            trigger = {
                has_trait = trait_inner_darkness
            }
            sr_dark_matter = @inner_darkness_dark_matter_production
        }
        produces = {
            trigger = {
                planet = {
                    has_modifier = pm_gaseous_fauna
                }
            }
            exotic_gases = @gaseous_fauna_exotic_gases_production
        }
    }
}

# 守望先驱者-继承自普通帝国的劳工阶层
precursor_warden = {
    rank = 2
    change_job_threshold = 1.15

    weight = {
        weight = 1
        # NO AI
        modifier = {
            factor = 0
            exists = planet
            exists = planet.controller
            planet.controller = {
                OR = {
                    is_country_type = ai_empire
                    NOT = { has_origin = Start_As_Fallen_Empire_Holy_Guardians }
                }
            }
        }
        # crisis purge
        modifier = {
            factor = 0.01
            exists = planet
            exists = planet.controller
            planet.controller = {
                OR = {
                    is_country_type = swarm
                    is_country_type = ai_empire
                }
            }
        }
        modifier = {
            factor = 0.01
            is_unemployed = yes
        }
    }

    pop_group_modifier = {
        pop_housing_usage_base = 1
        pop_amenities_usage_base = 1
    }

    # scope: pop to be resettled
    allow_resettlement = { always = yes }

    resettlement_cost = {
        energy = 100
        consumer_goods = 10
    }

    resettlement_cost = {
        trigger = {
            owner = {
                NOT = { has_valid_civic = civic_corvee_system }
            }
        }
        unity = 10
    }

    triggered_planet_modifier = {
        potential = {
            is_unemployed = no
            planet = { has_modifier = penal_colony }
        }
        planet_crime_add = 3
    }

    # Triggered Modifiers
    inline_script = "pop_categories/social_classes_triggered_modifiers"
    inline_script = "pop_categories/social_classes_triggered_modifiers_no_happiness"

    resources = {
        category = pop_category_precursor_warden

        # Living Standard Trait Output
        inline_script = "pop_categories/living_standard_worker_production"

        produces = {
            trigger = {
                has_trait = trait_inner_darkness
            }
            sr_dark_matter = @inner_darkness_dark_matter_production
        }
        produces = {
            trigger = {
                planet = {
                    has_modifier = pm_gaseous_fauna
                }
            }
            exotic_gases = @gaseous_fauna_exotic_gases_production
        }
        produces = {
            trigger = {
                planet = {
                    has_modifier = pm_raining_corpses
                }
            }
            minor_artifacts = @raining_corpses_resource_amount
        }
        produces = {
            trigger = {
                planet = {
                    has_modifier = pm_raining_corpses_no_ancrel
                }
            }
            consumer_goods = @raining_corpses_resource_amount
        }
    }
}