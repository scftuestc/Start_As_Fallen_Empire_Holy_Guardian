# example_class = {
#	name = <name_key>
# 	name_plural = <name_plural_key>
# 	description = <description_key>
#
#	#all the following default to no
#	can_lead_army = yes/no			# Applies skill_<class_id>_army scaled by level to armies
#	can_lead_navy = yes/no			# Applies skill_<class_id>_navy scaled by level to fleets
#	can_govern_planet = yes/no		# Applies skill_<class_id>_planet_governor scaled by level to governed planet
									# Applies skill_<class_id>_sector_governor scaled by level to governed sector, if governing the sector capital
									# Applies skill_<class_id>_background_planet_governor scaled by level togoverned planet, if governing their homeworld
#	can_be_envoy = yes/no
# 	can_research_tech = yes/no
# 	can_research_special_projects = yes/no
# 	can_crew_science_ship = yes/no
# 	can_research_anomalies = yes/no
# 	can_research_archaeology_site = yes/no
# 	can_survey = yes/no
# 	can_boost_cloaking_detection = yes/no
# 	can_explore_rifts = yes/no
# 	can_conduct_active_reconnaissance = yes/no
# 	can_govern_planet = yes/no
# 	can_have_traits = yes/no	# defaults to yes, if no this class will not gain LEADER_ASSIGNED_MONTHLY_EXPERIENCE when assigned
#	can_rule_empire = yes/no	# defaults to yes
#	recruitable = yes/no		# defaults to yes
# 	max_trait_points = <num>
#	leader_capacity = <num>		# maximum number of leader of this type before you get maluses, 0 means no cap
#	replaces_old_class = "old_class"	# used for backwards compatibility. When "old_class" appears in an old save, it is converted to this class at loading
#										# can appear multiple times
#
# 	resources = { #upkeep
# 		category = leader_scientists/etc
# 		cost = {
# 			...
# 		}
# 	}
#
# 	ai_weight = {			# used to determine which type of leader the AI prefers (frex: commanders for warlike leaders, and governor for pacifists)
# 		base = <num>
#		modifier = {}
# 	}
#
#	ai_location_weight = {	# used to evaluate a specific leader for an assignment to a specific location (right now only used for fleet),
#							# scope is the leader, from is the leader location (can be a planet, a fleet, an army etc)
#							# if the score is 0 or less, the leader will not be assigned to that location
#		base = <num>
#		modifier = {}
#	}
#
# 	minimum_ai_target = <num>
#
# 	leader_background_job_weight = {
# 		job_name = <weight>
# 		# etc
# 	}
# }
#
# icon = 1 # 1-based index in the icon file. might be replaced by an icon name later
#
# paragon_background_selector = <name of an asset_selector>, used to display a background behind paragon portraits
#
#
# How the AI assigns leaders now:
#
# Step 1: Sort all possible location using the NDefines::NAI::LOCATION_WEIGHT_* values (all of them are multipliers except the galactic community which is a flat value)
# Step 2: Sort all available leaders by skill
# Step 3: for each leader in order, calculate a location weight based on the ai_location_weight of their class
# Step 4: Assign the highest leader/location pair based on the weight
# Step 5: if no leader was assigned, see if hiring a leader is possible repeating the same steps

# 领导者类型为硬编码，modder无法自定义一个新的领导者类型（游戏引擎不会去读取和载入），只能进行一些有限的修改

@base_leader_cap = 3

official = {
	name = official
	name_plural = official_plural
	description = official_description
	can_govern_planet = yes
	max_trait_points = 1
	can_have_traits = yes
	can_be_assigned_to_federation = yes
	can_be_assigned_to_galactic_community = yes
	leader_capacity = @base_leader_cap
	resources = {
		category = leader_officials
		cost = {
			unity = 1
			mult = value:leader_cost
		}
		inline_script = "paragon/leader_base_upkeep"
		produces = {
			trigger = {
				exists = owner
				owner = {
					has_tradition = tr_politics_adopt
				}
				OR = {
					is_assigned_to_galcom = yes
					is_strengthing_imperial_authority = yes
					is_undermining_imperial_authority = yes
				}
			}
			influence = 0.1
			mult = trigger:has_total_skill
		}
	}

	ai_weight = {
		modifier = {
			factor = 2
			or = {
				is_pacifist = yes
				is_egalitarian = yes
			}
		}
	}

	ai_location_weight = {
		modifier = {
			add = 10
			exists = FROM
			from = {
				is_scope_type = planet
			}
		}
		complex_trigger_modifier = {
			potential = {
				exists = FROM
				from = {
					is_scope_type = planet
				}
			}
			trigger = pop_amount
			trigger_scope = from
			mode = add
			mult = 0.0001
		}
		inline_script = {
			script = paragon/num_traits_with_modifier
			SCOPE = planet
			MODIFIER = planet
		}
		inline_script = {
			script = paragon/num_traits_with_modifier
			SCOPE = federation
			MODIFIER = federation
		}
		inline_script = {
			script = paragon/num_traits_with_modifier
			SCOPE = galactic_community
			MODIFIER = galcom
		}
	}

	replaces_old_class = "governor"

	leader_background_job_weight = {
		### 原版普通帝国
		## ruler阶层及其转职
		# 政客及其转职
		politician = 10
		high_priest = 10
		noble = 10
		merchant = 10
		executive = 10

		## specialist阶层及其转职
		# 官僚及其转职
		bureaucrat = 10
		unifier = 10
		manager = 10
		preacher = 10
		death_chronicler = 10
		# 演艺人员
		entertainer = 10
		# 工匠
		artisan = 10
		# 再职派员
		reassigner = 10

		## worker阶层及其转职
		# 殖民者
		colonist = 10
		# 职员
		clerk = 10
		# 矿工及其转职
		miner = 10
		crystal_miner = 10
		scrap_miner = 10
		# 农夫及其转职
		farmer = 10
		angler = 10

		### 自定义的岗位
		## ruler阶层及其转职
		# 天空教主及其转职
		safe_fe_sky_cardinal = 500
		safe_fe_noble = 500
		safe_fe_merchant = 500

		## specialist阶层及其转职
		# 卷宗圣吏及其转职
		safe_fe_bureaucrat = 500
		safe_fe_death_chronicler = 500
		# 神仪演者
		safe_fe_entertainer = 500

		# 圣坊侍者及其转职
		safe_fe_acolyte_artisan = 500

		## worker阶层及其转职
		# 焰锤侍者及其转职
		safe_fe_acolyte_mine = 500
		# 犁耕侍者及其转职
		safe_fe_acolyte_farm = 500

	}
	icon = 4
	paragon_background_selector = "paragon_background_selector"
}

commander = {
	name = commander
	name_plural = commander_plural
	description = commander_description
	can_lead_navy = yes
	can_lead_army = yes
	can_govern_planet = yes
	max_trait_points = 1
	can_have_traits = yes
	leader_capacity = @base_leader_cap
	resources = {
		category = leader_commanders
		cost = {
			unity = 1
			mult = value:leader_cost
		}
		inline_script = "paragon/leader_base_upkeep"
	}
	ai_weight = {
		modifier = {
			factor = 2
			or = {
				is_militarist = yes
				is_authoritarian = yes
			}
		}
	}
	ai_location_weight = {
		modifier = {
			add = 10
			exists = FROM
			from = {
				OR = {
					is_scope_type = fleet
					is_scope_type = ship
				}
				is_civilian = no
			}
		}
		complex_trigger_modifier = {
			potential = {
				exists = FROM
				from = {
					OR = {
						is_scope_type = fleet
						is_scope_type = ship
					}
					is_civilian = no
				}
			}
			trigger = num_ships
			trigger_scope = from
			mode = add
			mult = 1
		}
		modifier = {
			add = 5
			exists = FROM
			from = {
				is_scope_type = planet
				planet_stability <= 10
			}
		}
		modifier = {
			add = 5
			exists = FROM
			from = {
				is_scope_type = planet
				planet_crime >= 25
			}
		}
		complex_trigger_modifier = {
			potential = {
				exists = FROM
				from = {
					is_scope_type = planet
					OR = {
						planet_stability <= 10
						planet_crime >= 25
					}
				}
			}
			trigger = pop_amount
			trigger_scope = from
			mode = add
			mult = 0.0001
		}
		inline_script = {
			script = paragon/num_traits_with_modifier
			SCOPE = planet
			MODIFIER = planet
		}
		inline_script = {
			script = paragon/num_traits_with_modifier
			SCOPE = fleet
			MODIFIER = fleet
		}
		inline_script = {
			script = paragon/num_traits_with_modifier
			SCOPE = army
			MODIFIER = army
		}
	}
	replaces_old_class = "admiral"
	replaces_old_class = "general"
	leader_background_job_weight = {
		### 原版普通帝国
		## ruler阶层及其转职
		# 政客转职
		noble = 10
		knight_commander = 10

		## specialist阶层及其转职
        # 演艺人员转职
		duelist = 10
		# 骑士
		knight = 10

		## worker阶层及其转职
		# 护林员
		ranger = 10
		# 扈从
		squire = 10

		### 自定义岗位
		## ruler阶层及其转职
		# 政客转职
		safe_fe_noble = 500

		## specialist阶层及其转职
		# 演艺人员转职
		safe_fe_duelist = 500

		## worker阶层及其转职
	}
	icon = 1
	paragon_background_selector = "paragon_background_selector"
}

scientist = {
	name = scientist
	name_plural = scientist_plural
	description = scientist_description
	can_research_tech = yes
	can_research_special_projects = yes
	can_crew_science_ship = yes
	can_research_anomalies = yes
	can_survey = yes
	can_boost_cloaking_detection = yes
	can_research_archaeology_site = yes
	can_explore_rifts = yes
	can_conduct_active_reconnaissance = yes
	can_govern_planet = yes
	max_trait_points = 1
	leader_capacity = @base_leader_cap
	resources = {
		category = leader_scientists
		cost = {
			unity = 1
			mult = value:leader_cost
		}
		inline_script = "paragon/leader_base_upkeep"
	}

	ai_weight = {
		base = 50
	}
	ai_location_weight = {
		modifier = {
			add = 10
			exists = FROM
			FROM = {
				is_scope_type = ship
				is_ship_class = shipclass_science_ship
			}
		}
		modifier = {
			add = 1
			exists = FROM
			FROM = {
				is_scope_type = planet
			}
		}
		modifier = {
			mult = 10
			exists = FROM
			FROM = {
				is_scope_type = planet
				exists = owner
				owner = {
					has_valid_civic = civic_technocracy
				}
			}
		}
		complex_trigger_modifier = {
			potential = {
				exists = FROM
				from = {
					is_scope_type = planet
				}
			}
			trigger = pop_amount
			trigger_scope = from
			mode = add
			mult = 0.000025
		}
		inline_script = {
			script = paragon/num_traits_with_modifier
			SCOPE = planet
			MODIFIER = planet
		}
		inline_script = {
			script = paragon/num_traits_with_modifier
			SCOPE = fleet
			MODIFIER = self
		}
		inline_script = {
			script = paragon/num_traits_with_modifier
			SCOPE = fleet
			MODIFIER = fleet
		}
	}
	minimum_ai_target = 3
	leader_background_job_weight = {
		### 原版普通帝国
		## ruler阶层及其转职
		# 政客转职
		head_researcher = 10
		noble = 10

		## specialist阶层及其转职
		# 执法者转职
		telepath = 10
		# 工匠转职
		artificer = 10
		catalytic_technician = 10
		# 生物学家转职
		xeno_zoo_keeper = 10
		# 冶金师
		foundry = 10
		# 化学家（易爆）
		chemist = 10
		# 转化师（水晶）
		translucer = 10
		# 气体精炼工（天然气）
		gas_refiner = 10
		# 机器人专家
		roboticist = 10
		# 医务工作者
		healthcare = 10

		## worker阶层及其转职
		# 殖民者
		colonist = 10
		# 技工及其转职
		technician = 10
		mote_harvester = 10
		# 农夫转职
		gas_extractor = 10
		puddle_technician = 10
		# 转换者
		bluelotus_technician = 10

		## 其他（典范人物）
		researcher = 10

		###自定义岗位
		## ruler阶层及其转职
		safe_fe_noble = 500

		## specialist阶层及其转职
		# 执法者转职
		safe_fe_augur = 500
		# 工匠转职
		safe_fe_artificer = 500
		safe_fe_catalytic_technician = 500
		# 生物学家转职
		safe_fe_xeno_zoo_keeper = 500
		# 冶金师
		safe_fe_foundry = 500

		## worker阶层及其转职
		# 技工及其转职
		safe_fe_acolyte_generator = 500

	}
	icon = 3
	paragon_background_selector = "paragon_background_selector"
}

envoy = {
	name = envoy
	name_plural = envoy_plural
	description = envoy_description
	can_be_envoy = yes
	default_category = envoy
	assignment_cooldown = 360
	can_have_traits = no
	recruitable = no
	can_rule_empire = no
	can_be_assigned_to_federation = no
	can_be_assigned_to_galactic_community = no
	icon = 5
	paragon_background_selector = "paragon_background_selector"
	resources = {
		category = shroud_envoys
		produces = {
			trigger = {
				is_assigned_to_patron = yes
			}
			sr_zro = 0.5
			mult = value:disciple_of_the_cradle_envoy_zro_mult
		}
	}
}
